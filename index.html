<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LABORANT.AI2 ¬∑ IBONARIUM CORE</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs" type="module"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
html,body{
  width:100%; height:100%;
  background:#000;
  color:#ffd166;
  font-family:"Courier New",monospace;
  overflow:hidden;
}
canvas{position:fixed; inset:0; z-index:0;}
.container{
  position:relative; z-index:2;
  height:100vh;
  display:grid;
  grid-template-columns:360px 1fr;
  grid-template-rows:60px 1fr;
  gap:20px;
  padding:20px;
}
.header{
  grid-column:1/-1;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.title{
  font-size:20px;
  letter-spacing:3px;
  text-shadow:0 0 20px rgba(255,209,102,.8);
}
.status-bar{
  display:flex; gap:20px; font-size:11px; opacity:.7;
}
.dot{
  width:6px; height:6px;
  background:#ffd166; border-radius:50%;
  display:inline-block; margin-right:5px;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{0%,100%{opacity:1} 50%{opacity:.3}}
.left-panel{
  display:flex; flex-direction:column; gap:30px;
}
.robot{
  width:220px; height:220px; position:relative; margin:auto;
}
.head{
  width:130px; height:130px;
  border:2px solid #ffd166; border-radius:20px;
  position:absolute; left:50%; transform:translateX(-50%);
  background:linear-gradient(135deg,rgba(255,209,102,.25),rgba(255,209,102,.05));
  box-shadow:0 0 35px rgba(255,209,102,.5);
  animation:float 3s ease-in-out infinite;
}
@keyframes float{0%,100%{transform:translate(-50%,0)} 50%{transform:translate(-50%,-12px)}}
.eye{
  width:26px; height:26px; background:#ffd166; border-radius:50%;
  position:absolute; top:36px; box-shadow:0 0 20px #ffd166;
}
.eye.l{left:28px} .eye.r{right:28px}
.mouth{
  width:60px; height:3px; background:#ffd166;
  position:absolute; bottom:30px; left:50%; transform:translateX(-50%);
}
.body{
  width:110px; height:80px;
  border:2px solid #ffd166; border-radius:12px;
  position:absolute; bottom:0; left:50%; transform:translateX(-50%);
  background:rgba(255,209,102,.12);
  box-shadow:0 0 25px rgba(255,209,102,.4);
}
.robot-name{text-align:center; letter-spacing:2px; margin-top:10px;}
.robot-title{text-align:center; font-size:11px; opacity:.6;}
.chat{
  display:flex; flex-direction:column;
}
.chat-title{
  text-align:center; margin-bottom:10px; opacity:.7;
}
.messages{
  flex:1; overflow-y:auto; padding-right:10px;
}
.msg{
  margin-bottom:14px; animation:fade .3s;
}
@keyframes fade{from{opacity:0;transform:translateY(6px)} to{opacity:1}}
.user{text-align:right; color:#ffe8a3}
.bot{color:#ffd166}
.input-box{display:flex; gap:10px;}
input{
  flex:1;
  background:rgba(40,30,0,.4);
  border:1px solid rgba(255,209,102,.4);
  color:#ffd166;
  padding:10px;
}
button{
  background:rgba(255,209,102,.15);
  border:1px solid #ffd166;
  color:#ffd166;
  padding:10px 18px;
  cursor:pointer;
}
</style>
</head>
<body>

<canvas id="bg"></canvas>

<div class="container">

<div class="header">
  <div class="title">LABORANT.AI2 ¬∑ IBONARIUM</div>
  <div class="status-bar">
    <span><span class="dot"></span>ONLINE</span>
    <span id="time"></span>
    <span id="state">IBONARIUM: ACTIVE</span>
  </div>
</div>

<div class="left-panel">
  <div>
    <div class="robot">
      <div class="head">
        <div class="eye l"></div>
        <div class="eye r"></div>
        <div class="mouth"></div>
      </div>
      <div class="body"></div>
    </div>
    <div class="robot-name">LABORANT.AI2</div>
    <div class="robot-title">ibonarium fragmentor v1.1</div>
  </div>

  <div>
    <button onclick="loadFromGitHub()">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ 1.pdf.pdf –∑ GitHub</button>
  </div>
</div>

<div class="chat">
  <div class="chat-title">üí¨ –Ü–ë–û–ù–ê–†–Ü–£–ú ‚Äî –£–†–ò–í–ö–ò</div>
  <div class="messages" id="msgs">
    <div class="msg bot">
      –≤—ñ—Ç–∞—é. —è laborant.ai2 ‚Äî —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ç–æ—Ä —ñ–±–æ–Ω–∞—Ä—ñ—É–º—É.<br>
      –±–µ—Ä—É —Ç–µ–∫—Å—Ç –∑ 1.pdf.pdf —ñ –≤–∏–¥–∞—é –≤–∏–ø–∞–¥–∫–æ–≤—ñ —à–º–∞—Ç–∫–∏.<br><br>
      –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É –≤–∏—â–µ, –ø–æ—Ç—ñ–º –ø–∏—à–∏:<br>
      ‚Ä¢ —Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —ñ–±–æ–Ω–∞—Ä—ñ—É–º<br>
      ‚Ä¢ –∫–∏–Ω—å —É—Ä–∏–≤–æ–∫<br>
      ‚Ä¢ —ñ–±–æ–Ω–∞—Ä—ñ—É–º<br>
      ‚Ä¢ —â–µ
    </div>
  </div>

  <div class="input-box">
    <input id="q" placeholder="—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —ñ–±–æ–Ω–∞—Ä—ñ—É–º‚Ä¶">
    <button onclick="ask()">‚Üí</button>
  </div>
</div>

</div>

<script type="module">
/* ===== BACKGROUND ===== */
const c = document.getElementById("bg"), x = c.getContext("2d");
let W, H, p = [];
function rs() {
  W = c.width = innerWidth;
  H = c.height = innerHeight;
  p = Array.from({length:120}, () => ({x:Math.random()*W, y:Math.random()*H, z:Math.random()*W}));
}
rs(); addEventListener("resize", rs);

function draw() {
  x.fillStyle = "#000"; x.fillRect(0,0,W,H);
  x.fillStyle = "#ffd166";
  p.forEach(s => {
    s.z -= 0.4; if (s.z < 1) s.z = W;
    const k = 120 / s.z;
    const X = (s.x - W/2) * k + W/2;
    const Y = (s.y - H/2) * k + H/2;
    if (X>0 && Y>0 && X<W && Y<H) x.fillRect(X, Y, 1.5, 1.5);
  });
  requestAnimationFrame(draw);
}
draw();

/* ===== TIME ===== */
setInterval(() => time.textContent = new Date().toLocaleTimeString("uk-UA"), 1000);

/* ===== PDF LOADING FROM GITHUB ===== */
import * as pdfjsLib from "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.min.mjs";
pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.0.379/pdf.worker.min.mjs";

let chunks = [];

async function loadFromGitHub() {
  const url = "https://github.com/lavandaaudit/laborant2/raw/main/1.pdf.pdf";
  add("–ó–∞–≤–∞–Ω—Ç–∞–∂—É—é 1.pdf.pdf –∑ GitHub...", "bot");

  try {
    const response = await fetch(url);
    if (!response.ok) throw new Error(`HTTP ${response.status}`);
    const arrayBuffer = await response.arrayBuffer();

    const pdf = await pdfjsLib.getDocument({data: arrayBuffer}).promise;
    let fullText = "";

    for (let i = 1; i <= pdf.numPages; i++) {
      const page = await pdf.getPage(i);
      const content = await page.getTextContent();
      let pageText = "";
      content.items.forEach(item => {
        pageText += item.str;
        if (item.hasEOL) pageText += "\n";
      });
      fullText += pageText + "\n\n";
    }

    // –†–æ–∑–±–∏–≤–∞—î–º–æ –Ω–∞ —à–º–∞—Ç–∫–∏ (–ø–∞—Ä–∞–≥—Ä–∞—Ñ–∏ / –±–ª–æ–∫–∏ –∑ –ø—É—Å—Ç–∏–º–∏ —Ä—è–¥–∫–∞–º–∏)
    chunks = fullText
      .split(/\n\s*\n+/)
      .map(s => s.trim())
      .filter(s => s.length > 20); // –≤—ñ–¥–∫–∏–¥–∞—î–º–æ –¥—É–∂–µ –∫–æ—Ä–æ—Ç–∫—ñ

    add(`–ì–æ—Ç–æ–≤–æ. –ó–Ω–∞–π–¥–µ–Ω–æ ${chunks.length} —É—Ä–∏–≤–∫—ñ–≤.`, "bot");
    add("–¢–µ–ø–µ—Ä –º–æ–∂–µ—à –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ ¬´—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —ñ–±–æ–Ω–∞—Ä—ñ—É–º¬ª –∞–±–æ ¬´—â–µ¬ª", "bot");
  } catch (err) {
    console.error(err);
    add("–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è: " + err.message, "bot");
  }
}

/* ===== CHAT ===== */
function ask() {
  const v = q.value.trim();
  if (!v) return;
  add(v, "user");
  q.value = "";
  setTimeout(() => add(answer(v), "bot"), 300 + Math.random() * 400);
}

function add(text, cls) {
  const d = document.createElement("div");
  d.className = `msg ${cls}`;
  d.innerHTML = text.replace(/\n/g, "<br>");
  msgs.appendChild(d);
  msgs.scrollTop = msgs.scrollHeight;
}

function answer(msg) {
  const m = msg.toLowerCase().trim();

  if (m.includes("—Ä–æ–∑–∫–∞–∂–∏") || m.includes("—ñ–±–æ–Ω–∞—Ä—ñ—É–º") || m.includes("–∫–∏–Ω—å") || m.includes("—â–µ") || m.includes("—Ñ—Ä–∞–≥–º–µ–Ω—Ç") || m === "—â–µ") {
    if (chunks.length === 0) {
      return "–°–ø–æ—á–∞—Ç–∫—É –∑–∞–≤–∞–Ω—Ç–∞–∂ PDF –∑ GitHub (–∫–Ω–æ–ø–∫–∞ –∑–≤–µ—Ä—Ö—É).";
    }
    const idx = Math.floor(Math.random() * chunks.length);
    let fragment = chunks[idx];

    // –Ø–∫—â–æ —É—Ä–∏–≤–æ–∫ –Ω–∞–¥—Ç–æ –¥–æ–≤–≥–∏–π ‚Äî –æ–±—Ä—ñ–∑–∞—î–º–æ –¥–æ ~800 —Å–∏–º–≤–æ–ª—ñ–≤
    if (fragment.length > 1200) {
      fragment = fragment.slice(0, 1100) + "... (–ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –≤ –æ—Ä–∏–≥—ñ–Ω–∞–ª—ñ)";
    }

    return fragment;
  }

  return "–Ø –≤–∏–¥–∞—é –≤–∏–ø–∞–¥–∫–æ–≤—ñ —É—Ä–∏–≤–∫–∏ –∑ –Ü–±–æ–Ω–∞—Ä—ñ—É–º—É.<br>–°–ø—Ä–æ–±—É–π: ¬´—Ä–æ–∑–∫–∞–∂–∏ –ø—Ä–æ —ñ–±–æ–Ω–∞—Ä—ñ—É–º¬ª, ¬´—â–µ¬ª, ¬´–∫–∏–Ω—å —É—Ä–∏–≤–æ–∫¬ª";
}

q.addEventListener("keydown", e => {
  if (e.key === "Enter") ask();
});
</script>

</body>
</html>
